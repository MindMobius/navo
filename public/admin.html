<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navo - 管理中心</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/admin.css">
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
    <!-- 顶部工具栏 -->
    <div class="top-toolbar">
        <div class="toolbar-branding">
            <div class="toolbar-title-container">
                <h1 class="toolbar-title">Navo</h1>
                <p class="toolbar-description">以用户评价为核心的轻量化导航站</p>
            </div>
        </div>
        <div class="admin-button-container">
            <a href="/" class="admin-btn" id="homeBtn" title="返回首页">
                <i data-feather="home"></i>
            </a>
            <a href="/key-auth.html" class="admin-btn" id="keyAuthBtn" title="密钥认证">
                <i data-feather="key"></i>
                <span class="key-status-indicator" id="keyStatusIndicator"></span>
            </a>
            <button class="admin-btn active" id="adminBtn" title="管理中心">
                <i data-feather="settings"></i>
            </button>
        </div>
    </div>

    <!-- 主要内容容器 -->
    <div class="main-content">


        <!-- 主体内容 -->
        <main class="admin-main">
            <div class="container">
                <!-- 页面导航 -->
                <div class="admin-nav">
                    <button class="admin-nav-btn active" data-page="site-management">
                        <i data-feather="globe"></i>
                        <span>站点管理</span>
                    </button>
                    <button class="admin-nav-btn" data-page="review-management">
                        <i data-feather="message-square"></i>
                        <span>评论管理</span>
                    </button>
                </div>

                <div class="admin-content">
                    <!-- 站点管理页面 -->
                    <div class="admin-page active" id="site-management-page">
                        <div class="admin-page-header">
                            <h2>站点列表</h2>
                            <button id="addSiteBtn" class="btn-primary">
                                <i data-feather="plus"></i>
                                添加站点
                            </button>
                        </div>
                        
                        <div class="admin-section">
                            <div class="site-grid" id="adminSiteGrid">
                                <!-- 站点列表将通过JavaScript动态加载 -->
                                <p class="empty-placeholder">暂无站点数据</p>
                            </div>
                        </div>
                    </div>

                    <!-- 添加站点表单 -->
                    <div class="admin-page" id="add-site-page">
                        <div class="admin-page-header">
                            <button id="backToSitesBtn" class="btn-secondary">
                                <i data-feather="arrow-left"></i>
                                返回
                            </button>
                            <h2>添加新站点</h2>
                        </div>
                        
                        <div class="admin-section">
                            <form id="siteForm">
                                <div class="form-group">
                                    <label for="siteUrl">站点地址 *</label>
                                    <input type="url" id="siteUrl" name="siteUrl" required placeholder="https://example.com">
                                </div>
                                <div class="form-group">
                                    <label for="siteReview">您的评价 *</label>
                                    <textarea id="siteReview" name="siteReview" rows="4" placeholder="请在这里添加您对这个站点的评价..." required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="siteTags">标签 (用逗号分隔)</label>
                                    <input type="text" id="siteTags" name="siteTags" placeholder="例如: 设计,工具,开发">
                                </div>
                                <div class="form-group">
                                    <label for="siteStatus">站点状态</label>
                                    <select id="siteStatus" name="siteStatus">
                                        <option value="public">公开</option>
                                        <option value="private">私有</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button type="button" id="cancelAddSiteBtn" class="btn-secondary">取消</button>
                                    <button type="submit" class="btn-primary">添加站点</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 编辑站点表单 -->
                    <div class="admin-page" id="edit-site-page">
                        <div class="admin-page-header">
                            <button id="backToSitesFromEditBtn" class="btn-secondary">
                                <i data-feather="arrow-left"></i>
                                返回
                            </button>
                            <h2>编辑站点</h2>
                        </div>
                        
                        <div class="admin-section">
                            <form id="editSiteForm">
                                <input type="hidden" id="editSiteId">
                                <div class="form-group">
                                    <label for="editSiteUrl">站点地址 *</label>
                                    <input type="url" id="editSiteUrl" name="editSiteUrl" required>
                                </div>
                                <div class="form-group">
                                    <label for="editSiteReview">您的评价 *</label>
                                    <textarea id="editSiteReview" name="editSiteReview" rows="4" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="editSiteTags">标签 (用逗号分隔)</label>
                                    <input type="text" id="editSiteTags" name="editSiteTags">
                                </div>
                                <div class="form-group">
                                    <label for="editSiteStatus">站点状态</label>
                                    <select id="editSiteStatus" name="editSiteStatus">
                                        <option value="public">公开</option>
                                        <option value="private">私有</option>
                                    </select>
                                </div>
                                <div class="form-actions">
                                    <button type="button" id="cancelEditSiteBtn" class="btn-secondary">取消</button>
                                    <button type="submit" class="btn-primary">保存更改</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- 评论管理页面 -->
                    <div class="admin-page" id="review-management-page">
                        <div class="admin-page-header">
                            <h2>评论列表</h2>
                        </div>
                        
                        <div class="admin-section">
                            <div class="reviews-grid" id="reviewsGrid">
                                <!-- 评论列表将通过JavaScript动态加载 -->
                                <p class="empty-placeholder">暂无评论数据</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <!-- 页脚 -->
        <footer class="site-footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-links">
                        <span class="footer-item">项目支持：<a href="https://github.com/MindMobius" target="_blank" class="github-link"><i
                                    data-feather="github"></i> MindMobius</a></span>
                        <span class="footer-item">仓库地址：<a href="https://github.com/MindMobius/navo" target="_blank" class="github-link"><i
                                    data-feather="github"></i> navo</a></span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- 脚本 -->
    <script src="/js/admin.js"></script>
    <script>
        // 初始化 feather icons
        feather.replace();
        
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 返回首页功能
            const backToMainBtn = document.getElementById('backToMainBtn');
            if (backToMainBtn) {
                backToMainBtn.addEventListener('click', function() {
                    window.location.href = '/';
                });
            }
            
            // 管理页面切换
            const navButtons = document.querySelectorAll('.admin-nav-btn');
            const pages = document.querySelectorAll('.admin-page');
            
            navButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    // 更新按钮状态
                    navButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 显示目标页面
                    pages.forEach(page => {
                        page.classList.remove('active');
                        if (page.id === targetPage + '-page') {
                            page.classList.add('active');
                        }
                    });
                });
            });
            
            // 添加站点按钮
            const addSiteBtn = document.getElementById('addSiteBtn');
            if (addSiteBtn) {
                addSiteBtn.addEventListener('click', function() {
                    // 隐藏站点列表页面
                    document.getElementById('site-management-page').classList.remove('active');
                    // 显示添加站点页面
                    document.getElementById('add-site-page').classList.add('active');
                });
            }
            
            // 返回站点列表按钮
            const backToSitesBtn = document.getElementById('backToSitesBtn');
            const backToSitesFromEditBtn = document.getElementById('backToSitesFromEditBtn');
            const cancelAddSiteBtn = document.getElementById('cancelAddSiteBtn');
            const cancelEditSiteBtn = document.getElementById('cancelEditSiteBtn');
            
            [backToSitesBtn, backToSitesFromEditBtn, cancelAddSiteBtn, cancelEditSiteBtn].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function() {
                        // 隐藏当前页面
                        document.querySelector('.admin-page.active').classList.remove('active');
                        // 显示站点列表页面
                        document.getElementById('site-management-page').classList.add('active');
                        // 激活站点管理导航按钮
                        navButtons.forEach(btn => btn.classList.remove('active'));
                        document.querySelector('.admin-nav-btn[data-page="site-management"]').classList.add('active');
                    });
                }
            });
        });
    </script>
</body>
</html>